<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Releases</title>
  {% set use_local_assets = handler.settings.get("use_local_assets") %}
  {% if use_local_assets %}
  <link rel="stylesheet" href="{{ static_url('vendor/bootstrap-5.3.7.min.css') }}">
  <script src="{{ static_url('vendor/bootstrap-5.3.7.bundle.min.js') }}"></script>
  {% else %}
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr sha384-fhoKacxXiUKwMGMcI8QlD1sG38/zqnIgQmAQr0Nu+cv25q8Q348nzcZEzXm0/gau"
    crossorigin="anonymous"
  >
  <link rel="stylesheet" href="{{ static_url('vendor/bootstrap-5.3.7.min.css') }}">
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q sha384-H+d/9ZcoyMusVG6bhHlOvRrcmhyEoGxj4f5Vt209iGhHV828YDm+Mk6/36f2JYWM"
    crossorigin="anonymous"
  ></script>
  <script>
    if (typeof bootstrap === "undefined") {
      document.write('<script src="{{ static_url("vendor/bootstrap-5.3.7.bundle.min.js") }}"><\\/script>');
    }
  </script>
  {% end %}
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="/" data-test="nav-commits">Commits</a>
      <div class="navbar-nav">
        <a class="nav-link" href="/issues" data-test="nav-issues">Issues</a>
        <span class="nav-link active fw-semibold" aria-current="page">Releases</span>
      </div>
    </div>
  </nav>

  <main class="container my-4">
    <header class="mb-4">
      <h1 class="h3 mb-1">Releases</h1>
      <p class="text-muted mb-0">Browse releases built from commit and issue metadata.</p>
    </header>

    {% if not releases %}
      <div class="alert alert-info" role="status" data-test="release-empty">
        No releases are currently defined. Assign release values to commits to see them here.
      </div>
    {% else %}
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th scope="col">Release</th>
              <th scope="col">Issues</th>
              <th scope="col">Commits</th>
            </tr>
          </thead>
          <tbody>
            {% for release in releases %}
            <tr data-test="release-row" data-release="{{ release['slug'] }}">
              <td>
                <a data-test="release-link" href="/release/{{ release['slug'] }}">{{ release['slug'] }}</a>
              </td>
              <td data-test="release-issue-count">{{ release['issue_count'] }}</td>
              <td data-test="release-commit-count">{{ release['commit_count'] }}</td>
            </tr>
            {% end %}
          </tbody>
        </table>
      </div>
    {% end %}
  </main>
</body>
</html>
